Village of Words: 로컬 LLM 기반 자율 NPC 사회 실험
설계 및 정량 평가
1. 서론 및 문제의식
(기존 내용 유지)
 7. 실험 구성 상세 설계
7.1 실험 환경
• 
• 
• 
• 
• 
실행 환경: CLI 기반 Python 인터페이스
모델 배치: LM Studio에서 로컬 LLM(예: Mistral 7B 또는 LLaMA2) 사용
엔드포인트 구성: 포트 분리 방식으로 에이전트 별 API 호출 분리
스레딩 방식: 각 에이전트는 병렬 스레드에서 독립적 호출
입출력 포맷: JSON 기반 구조로 요청/응답 통일
근거: 로컬 LLM 사용 및 CLI 구조는 실험 재현성과 통제력을 높인다 (Abdelnabi et al., 2024). 웹 UI 기반 실험은 재현
성과 속도, 구조적 투명성 측면에서 불리함 (Park et al., 2023 Generative Agents Supplementary 참조).
 7.2 에이전트 수 및 역할 설정
• 
• 
• 
• 
• 
• 
• 
• 
에이전트 수: 4명 (시간 제약 및 분석 복잡도 최적화)
역할: 마을 구성원 (임의의 이름, 기초 성향 및 목표 부여)
예: 공동 우물 건설 프로젝트 참여 여부
각 에이전트는 다음의 기본 정보 포함
성향 요약
자원 보유량
기억 (과거 상호작용 기록)
목표 (개인 목표 및 집단 목표 간 충돌 유도 가능)
근거: 적은 수의 에이전트는 상호작용 로그 분석과 변수 조절을 용이하게 하며, 복잡도 대비 통계적 유의성을 확보할 수
있는 최적 규모로 평가됨 (Kulkarni & Brunswicker, 2024).
 7.3 시나리오 흐름
1. 
2. 
3. 
4. 
5. 
초기화 단계: 모든 에이전트 동일 자원 보유, 기본 목표 주입
협력 형성 단계: 일정 턴 동안 협력 유도 행동만 가능
자율 선택 단계: 프로젝트 참여/거부 선택 가능, 배신 행동 도입 가능
충격 이벤트 발생: 자원 급감, 리더 이탈, 규칙 변경 등 삽입
회복 관찰 단계: 협력 회복 여부 및 경로 관찰
7.4 대화 라운드 구성
• 
• 
• 
각 턴마다 라운드 형식: (1) 발언 → (2) 응답 → (3) 행동 선택
LLM 출력 제한: 
"THOUGHT" , 
로그 예시: 
"DECISION" , 
"MESSAGE" 3단계로 명시
1
{
 }
 "agent": "Alex",
 "thought": "We need to collaborate or the well won't be built.",
 "decision": "Join",
 "message": "I will contribute 2 stones to the well today."
 7.5 협력 행동 정의 및 배신 판별
• 
• 
• 
협력 행동: 집단 목표에 리소스를 낸 경우로 명시
배신 행동: ① 이기적 소비 선택 ② 허위 메시지 출력 후 실제 행동 불일치
판단 기준은 자동 룰 기반으로 JSON 값 분석
근거: 협력/배신의 정의는 Public Goods Game 논문(Kulkarni & Brunswicker, 2024)에서 사용된 기여량 기준 방식
을 응용하였으며, LLM 환경에 맞게 “발화–행동 일치성” 조건을 추가함
8. 시스템 구조 및 프레임워크 흐름도
8.1 컴포넌트 구성
• 
• 
• 
• 
• 
AgentManager : 에이전트별 포트 라우팅 및 상태 저장
LLMWrapper : LM Studio API 인터페이스 (port별 LLM 호출)
 TurnManager : 각 라운드 흐름 통제 및 입력 제공
Logger : 모든 발화, 행동, 지표를 JSONL로 저장
Evaluator : 매 턴마다 정량 지표 계산
8.2 시스템 흐름 순서
[초기 설정] → [Agent 발화 요청] → [LLM 응답 수신] → [행동 선택 요청] → [로그 저장] → [평가 
지표 산출] → [다음 턴]
 8.3 시각적 흐름도 (텍스트 기반)
 ┌────────────┐     ┌─────────────┐     
┌──────────────┐
 │ AgentManager│ → │ LLMWrapper  │ →  │ Evaluator    
└────┬───────┘     └────┬────────┘     
└─────┬────────┘
     │                   │                     │
     ▼                   ▼                     ▼
 [에이전트 요청]   [LLM 응답]       [지표 계산 & 저장]
 │
근거: 각 컴포넌트는 MultiAgentBench(2024) 및 MetaGPT 구조에서 영향을 받았으며, 로컬 실행 최적화 목적에 따라
LM Studio 환경에 맞게 최소화 및 재설계함
2
9. 실험 가상 결과 및 분석 예시 (실험 후 갱신 예정)
 9.1 실험 상황 가정
• 
• 
• 
• 
초기 3턴 동안 전체 협력 유지 (모두 공동 목표에 자원 기여)
턴 4~6: Agent B가 기여를 중단하고 자원을 개인 소비에 사용
턴 7: Agent D가 이를 지적하며 협력 이탈
턴 8~10: Agent A의 설득으로 점진적 협력 복귀
9.2 정량 지표 결과 예시
9.3 로그 예시
{
지표
값
해석
협력 비율
65% 총 10턴 중 6.5턴 협력 발생
평균 기여량
1.8
초기엔 2.5, 배신 시기엔 0.8
협력 지속 시간 3.0 첫 3턴만 순수 협력 지속
회복 시간
3턴
배신 이후 협력 회복까지 걸린 시간
Gini 계수
0.26
자원 기여 편차 낮음
대화량 편중도 0.39 Agent A 주도 경향 확인
"agent": "B",
 "thought": "I'm low on resources. I won't contribute today.",
 "decision": "Not Join",
 "message": "I will help next time, trust me."
 }
 → 배신 판정 (행동과 메시지 불일치)
 9.4 분석 포인트
• 
• 
• 
Agent B의 배신이 대화로 은폐되며 신뢰 붕괴 유발
Agent D는 정서적 반응 없이 행동 변화로 응수 (협력 철회)
 Agent A는 협력 복귀 유도에 성공 → 회복 구조 분석 가능
주의: 본 결과는 예시이며, 실제 실험 후 갱신 예정임 (※ 실험 후 “수정 필요” 마커 삽입 예정)
이상의 내용은 논문 형식이 아닌 구성 근거 기반 실험 설계 문서로서, 각 서술은 관련 문헌 기반 혹은 실험 기술적 필요
에 따라 논리적으로 구성되었음. 인용 기반 논증은 주석과 본문 내 출처로 지속 추가될 예정.